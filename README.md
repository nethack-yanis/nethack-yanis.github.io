# NetHack YANI Archive

This is a GitHub Pages site that hosts a repository of NetHack design ideas.

* [NetHack main website](https://nethack.org)
* [NetHack github](https://github.com/nethack/nethack)
* [NetHack wiki](https://nethackwiki.com)

## Process for adding new ideas

1. Scan IRC files for things that look like they contain game design ideas or
   suggestions. "YANI" is NetHack specific; other things such as "feature
   request", "FR", "suggestion" may help cast a wider net.
2. Run `new_ideas.sh` without arguments to repeatedly generate a blank template
   for the next available number and open it in vim. If you accidentally
   generate any extra blank files without putting actual ideas in them, make
   sure to remove them.
3. For each new idea, write down the online handles of the people who came up
   with it as authors.
4. For each new idea, tag the idea with whichever tags are appropriate, which in
   this case means directly relevant to the idea. Use `list-tags.sh` for a
   reference list of the tags that already exist. Care should be taken when
   creating a tag that hasn't been used yet.
5. If an idea seems like it might have been suggested before and the current one
   isn't completely new, use `tagadder.sh '[tag]'` to look at ideas with that
   tag and see if it is indeed a duplicate. You can also use `tagadder.sh --full
   '[regex]' to search the whole idea file for that regex, which may be useful
   for identifiers that probably aren't tags. If the idea *is* a duplicate but
   the new one being considered adds something new, fold it into the old one and
   add the author if they're not already there. If the new one doesn't add
   anything new, ignore it.
6. Once all new ideas have been collected and written into the \_yanis
   directory, it's time to start preparing the commit. First check for any
   questionable new additions with authors/tags by running
   `tag_author_generator.sh --print-tags | grep NEW` and
   `tag-author-generator.sh --print-authors | grep NEW`. If there are any wrong
   inclusions such as typos, alternate names for existing tags, or tags that on
   second thought really don't deserve to be an entire tag, use tagadder.sh to
   go into the idea that uses that tag and fix them.
7. Run `tag_author_generator.sh --write-both` to actually create the tag and
   author pages. Make sure to save the lists of new tags and authors for the
   commit message. (At some point this process should probably be turned into a
   prepare-commit-msg git hook.)
8. Git add all the new files in \_yanis along with any files that were changed
   because of folding new aspects of an idea into them. Also git add the newly
   created files in `tag` and `author`.
9. Update the \_data/tagfreq.csv file via `list-tags.sh --write-csv` and git
   add it. A pre-commit hook already exists for this, but make sure NOT to
   commit changes to this file if doing some maintenance commit that doesn't add
   new ideas.
10. If any newly added tags are 1) variant-specific and 2) only appear once,
    they should probably be added to \_data/low_volume_exclude.yml. This helps
    prevent overcrowding in the tags list webpage.
11. Run `low-volume-tester.sh` to print tags that don't belong in
    low_volume_exclude.yml anymore. Delete those tags from that file.
12. Update the date range and the YANI starting number in `recent.html`, then
    git add it.
13. Git commit and write the commit message. A standard commit adding new ideas
    should contain four pieces of information in its commit message, in this
    order:
    1. The date of the most recently added idea.
    2. The number of newly added ideas.
    3. A list of newly added authors.
    4. A list of newly added tags. (This is good practice because it makes it
       easy to identify tags that are typoed or have a pluralization difference
       from an existing tag, and should be changed).

## Regarding the filter pages system

The filter pages system is based on the filterpage layout. Filter pages can
filter on either tag or author, and will list ALL ideas for that respective tag
or author.

HTML files in the tags/ folder should have this exact front matter:
    layout: filterpage
    tag: its tag with spaces for any word breaks

Their filename must be the same as the tag but must use underscores in place of
any spaces. Otherwise autogenerated links to them won't work.

HTML files in the authors/ folder work on identical principles.

Jekyll cannot generate these files on its own; they must be provided separately.

## Proper layouts for pages

* default layout: Top level unique pages and other layouts.
* filterpage layout: Tag and author pages.
* singleidea layout: Individual YANI pages.

## Other notes

* Anything including yanitemplate.html must have in-scope a 'yani' variable in
  Liquid.
* Author names and tags can contain spaces, but cannot contain commas. Spaces
  are automatically translated to underscores in filenames and URLs. Most other
  special characters aren't currently supported, except apostrophes. (This is
  why there's a "demon monster class" tag and not a "& monster class" tag, for
  instance.)
